{"ast":null,"code":"var _jsxFileName = \"/Users/mahadrehan/Desktop/FloatPOS/float/src/components/DraggableTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Draggable from \"react-draggable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TableImg = styled.img`\n  width: 60%;\n  height: 60%;\n  pointer-events: none; /* This ensures the image doesn't interfere with dragging */\n`;\n_c = TableImg;\nexport default function DraggableTable({\n  img,\n  gridRef,\n  addElementToGrid,\n  updatePosition,\n  initialPosition = {\n    x: 0,\n    y: 0\n  },\n  isInGrid = false,\n  resetOnDrop = false,\n  isDraggable = true,\n  // New prop to control draggable state\n  isSelected,\n  onSelect,\n  selectedTable\n}) {\n  _s();\n  const [dragging, setDragging] = useState(false);\n  const [position, setPosition] = useState(initialPosition);\n  const draggableRef = useRef(null);\n  useEffect(() => {\n    if (!isDraggable) {\n      setDragging(false);\n    }\n  }, [isDraggable]);\n  const handleDragStop = (e, data) => {\n    const gridRect = gridRef.current.getBoundingClientRect();\n    const draggableRect = draggableRef.current.getBoundingClientRect();\n    if (draggableRect.left >= gridRect.left && draggableRect.right <= gridRect.right && draggableRect.top >= gridRect.top && draggableRect.bottom <= gridRect.bottom) {\n      // Element is within the grid bounds\n      const newX = draggableRect.left - gridRect.left;\n      const newY = draggableRect.top - gridRect.top;\n      if (isInGrid) {\n        setPosition({\n          x: newX,\n          y: newY\n        });\n        if (updatePosition) {\n          updatePosition({\n            x: newX,\n            y: newY\n          });\n        }\n      } else {\n        addElementToGrid( /*#__PURE__*/_jsxDEV(DraggableTable, {\n          img: img,\n          gridRef: gridRef,\n          addElementToGrid: addElementToGrid,\n          updatePosition: updatePosition,\n          initialPosition: {\n            x: newX,\n            y: newY\n          },\n          isInGrid: true,\n          isDraggable: isDraggable // Pass the prop\n          ,\n          isSelected: isSelected,\n          onSelect: onSelect,\n          selectedTable: selectedTable\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), {\n          x: newX,\n          y: newY\n        });\n        if (resetOnDrop) {\n          setPosition({\n            x: 0,\n            y: 0\n          });\n        }\n      }\n    } else {\n      // Element is outside the grid bounds, reset position\n      setPosition(initialPosition);\n    }\n    setDragging(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Draggable, {\n    nodeRef: draggableRef,\n    onStart: () => isDraggable && setDragging(true),\n    onStop: isDraggable ? handleDragStop : null,\n    position: position,\n    disabled: !isDraggable // Disable dragging if not in edit mode\n    ,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: draggableRef,\n      className: `draggable-content ${dragging ? \"dragging\" : \"\"}`,\n      style: {\n        border: '1px solid grey',\n        opacity: isSelected || selectedTable === null ? 1 : 0.5,\n        marginTop: isSelected && !isDraggable ? '-1rem' : '0',\n        transform: isSelected && !isDraggable ? \"translateY(-50px)\" : \"translateY(0)\",\n        transition: \"all 0.5s\"\n      },\n      onClick: () => !isDraggable && onSelect() // Only selectable when not draggable\n      ,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"draggable-icon\",\n        src: \"/assets/icons/draggable-icon.svg\",\n        alt: \"draggable icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableImg, {\n        src: img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), isSelected && !isDraggable && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"table-number\",\n          children: \"#20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"table-count\",\n          children: \"4 people\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"table-server\",\n          children: \"served by Mahad R.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"table-add-button\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"table-checkout-button\",\n          children: \"checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(DraggableTable, \"WgQgTySbFg/USLanC9JNFmZMdRM=\");\n_c2 = DraggableTable;\nvar _c, _c2;\n$RefreshReg$(_c, \"TableImg\");\n$RefreshReg$(_c2, \"DraggableTable\");","map":{"version":3,"names":["React","useState","useRef","useEffect","styled","Draggable","jsxDEV","_jsxDEV","TableImg","img","_c","DraggableTable","gridRef","addElementToGrid","updatePosition","initialPosition","x","y","isInGrid","resetOnDrop","isDraggable","isSelected","onSelect","selectedTable","_s","dragging","setDragging","position","setPosition","draggableRef","handleDragStop","e","data","gridRect","current","getBoundingClientRect","draggableRect","left","right","top","bottom","newX","newY","fileName","_jsxFileName","lineNumber","columnNumber","nodeRef","onStart","onStop","disabled","children","ref","className","style","border","opacity","marginTop","transform","transition","onClick","src","alt","_c2","$RefreshReg$"],"sources":["/Users/mahadrehan/Desktop/FloatPOS/float/src/components/DraggableTable.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Draggable from \"react-draggable\";\n\nconst TableImg = styled.img`\n  width: 60%;\n  height: 60%;\n  pointer-events: none; /* This ensures the image doesn't interfere with dragging */\n`;\n\nexport default function DraggableTable({\n  img,\n  gridRef,\n  addElementToGrid,\n  updatePosition,\n  initialPosition = { x: 0, y: 0 },\n  isInGrid = false,\n  resetOnDrop = false,\n  isDraggable = true, // New prop to control draggable state\n  isSelected,\n  onSelect,\n  selectedTable\n}) {\n  const [dragging, setDragging] = useState(false);\n  const [position, setPosition] = useState(initialPosition);\n  const draggableRef = useRef(null);\n\n  useEffect(() => {\n    if (!isDraggable) {\n      setDragging(false);\n    }\n  }, [isDraggable]);\n\n  const handleDragStop = (e, data) => {\n    const gridRect = gridRef.current.getBoundingClientRect();\n    const draggableRect = draggableRef.current.getBoundingClientRect();\n\n    if (\n      draggableRect.left >= gridRect.left &&\n      draggableRect.right <= gridRect.right &&\n      draggableRect.top >= gridRect.top &&\n      draggableRect.bottom <= gridRect.bottom\n    ) {\n      // Element is within the grid bounds\n      const newX = draggableRect.left - gridRect.left;\n      const newY = draggableRect.top - gridRect.top;\n\n      if (isInGrid) {\n        setPosition({ x: newX, y: newY });\n        if (updatePosition) {\n          updatePosition({ x: newX, y: newY });\n        }\n      } else {\n        addElementToGrid(\n          <DraggableTable\n            img={img}\n            gridRef={gridRef}\n            addElementToGrid={addElementToGrid}\n            updatePosition={updatePosition}\n            initialPosition={{ x: newX, y: newY }}\n            isInGrid={true}\n            isDraggable={isDraggable} // Pass the prop\n            isSelected={isSelected}\n            onSelect={onSelect}\n            selectedTable={selectedTable}\n          />,\n          { x: newX, y: newY }\n        );\n        if (resetOnDrop) {\n          setPosition({ x: 0, y: 0 });\n        }\n      }\n    } else {\n      // Element is outside the grid bounds, reset position\n      setPosition(initialPosition);\n    }\n\n    setDragging(false);\n  };\n\n  return (\n    <Draggable\n      nodeRef={draggableRef}\n      onStart={() => isDraggable && setDragging(true)}\n      onStop={isDraggable ? handleDragStop : null}\n      position={position}\n      disabled={!isDraggable} // Disable dragging if not in edit mode\n    >\n      <div\n        ref={draggableRef}\n        className={`draggable-content ${dragging ? \"dragging\" : \"\"}`}\n        style={{\n          border: '1px solid grey',\n          opacity: isSelected || selectedTable === null ? 1 : 0.5,\n          marginTop: isSelected && !isDraggable ? '-1rem' : '0',\n          transform: isSelected && !isDraggable ? \"translateY(-50px)\" : \"translateY(0)\",\n          transition: \"all 0.5s\",\n        }}\n        onClick={() => !isDraggable && onSelect()} // Only selectable when not draggable\n      >\n        <img className=\"draggable-icon\" src=\"/assets/icons/draggable-icon.svg\" alt=\"draggable icon\" />\n        <TableImg src={img} />\n        {isSelected && !isDraggable && (\n          <div className=\"table-menu\">\n            <p className=\"table-number\">#20</p>\n            <p className=\"table-count\">4 people</p>\n            <p className=\"table-server\">served by Mahad R.</p>\n            <button className=\"table-add-button\">+</button>\n            <button className=\"table-checkout-button\">checkout</button>\n          </div>\n        )}\n      </div>\n    </Draggable>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}